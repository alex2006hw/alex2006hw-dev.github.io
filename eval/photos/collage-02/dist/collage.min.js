!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.collage=t()}}(function(){var t;return function e(t,i,n){function r(s,a){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return r(i?i:e)},h,h.exports,e,t,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e){function i(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var i=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e,i,n){(function(r){!function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof r?o=r:"undefined"!=typeof self&&(o=self),o.BigSurface=e()}}(function(){var t;return function i(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var h="function"==typeof e&&e;if(!c&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,i,t,n,r)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,i,n){(function(r){!function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof r?o=r:"undefined"!=typeof self&&(o=self),o.easyTween=e()}}(function(){return function t(i,n,r){function o(a,c){if(!n[a]){if(!i[a]){var h="function"==typeof e&&e;if(!c&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};i[a][0].call(u.exports,function(t){var e=i[a][1][t];return o(e?e:t)},u,u.exports,t,i,n,r)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){"use strict";i.linear=function(t,e,i,n){return i*t/n+e},i.quadraticIn=function(t,e,i,n){return i*(t/=n)*t+e},i.quadraticOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},i.quadraticInOut=function(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},i.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},i.cubicOut=function(t,e,i,n){return t/=n,i*(--t*t*t+1)+e},i.cubicInOut=function(t,e,i,n){return t/=n/2,1>t?i*(t/=n)*t*t+e:i/2*((t-=2)*t*t+2)+e};var n=Math.PI/2;i.sinusoidalIn=function(t,e,i,r){return-i*Math.cos(t/r*n)+i+e},i.sinusoidalOut=function(t,e,i,r){return i*Math.sin(t/r*n)+e},i.sinusoidalInOut=function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},i.exponentialIn=function(t,e,i,n){return i*Math.pow(2,10*(t/n-1))+e},i.exponentialOut=function(t,e,i,n){return i*(-Math.pow(2,-10*t/n)+1)+e},i.exponentialInOut=function(t,e,i,n){return t/=n/2,1>t?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e}},{}],2:[function(t,e){"use strict";var i,n=e.exports=function(t,e,i,n,r,o){function s(){f||(f=!0,cancelAnimationFrame(h),d=Date.now())}function a(){f&&(f=!1,p+=Date.now()-d,h=requestAnimationFrame(c))}function c(){var n=Date.now()-p;r>n?(e[i]=t(n,u,l,r),h=requestAnimationFrame(c)):(e[i]=t(r,u,l,r),o&&o())}r=r||0;var h,u=e[i],l=n-u,p=Date.now(),d=p,f=!0;return a(),{resume:a,pause:s}},r=t("./easing.js");for(i in r)r.hasOwnProperty(i)&&(n[i]=n.bind(void 0,r[i]));n.easing=r},{"./easing.js":1}]},{},[2])(2)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,i){(function(){"use strict";function e(){}function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function r(t){return function(){return this[t].apply(this,arguments)}}var o=e.prototype,s=this,a=s.EventEmitter;o.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},o.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},o.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},o.addListener=function(t,e){var i,r=this.getListenersAsObject(t),o="object"==typeof e;for(i in r)r.hasOwnProperty(i)&&-1===n(r[i],e)&&r[i].push(o?e:{listener:e,once:!1});return this},o.on=r("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=r("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,e){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=n(o[r],e),-1!==i&&o[r].splice(i,1));return this},o.off=r("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,i){var n,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)o.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(r=e[n])&&("function"==typeof r?o.call(this,n,r):s.call(this,n,r));return this},o.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},o.removeAllListeners=r("removeEvent"),o.emitEvent=function(t,e){var i,n,r,o,s=this.getListenersAsObject(t);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].length;n--;)i=s[r][n],i.once===!0&&this.removeListener(t,i.listener),o=i.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},o.trigger=r("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return s.EventEmitter=a,e},"function"==typeof t&&t.amd?t(function(){return e}):"object"==typeof i&&i.exports?i.exports=e:this.EventEmitter=e}).call(this)},{}],3:[function(e,i){!function(e,n){"use strict";function r(){o.READY||(b.determineEventTypes(),g.each(o.gestures,function(t){j.register(t)}),b.onTouch(o.DOCUMENT,f,j.detect),b.onTouch(o.DOCUMENT,m,j.detect),o.READY=!0)}var o=function(t,e){return new o.Instance(t,e||{})};o.VERSION="1.0.11",o.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},o.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,o.HAS_TOUCHEVENTS="ontouchstart"in e,o.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,o.NO_MOUSEEVENTS=o.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(o.MOBILE_REGEX),o.EVENT_TYPES={},o.UPDATE_VELOCITY_INTERVAL=16,o.DOCUMENT=e.document;var s=o.DIRECTION_DOWN="down",a=o.DIRECTION_LEFT="left",c=o.DIRECTION_UP="up",h=o.DIRECTION_RIGHT="right",u=o.POINTER_MOUSE="mouse",l=o.POINTER_TOUCH="touch",p=o.POINTER_PEN="pen",d=o.EVENT_START="start",f=o.EVENT_MOVE="move",m=o.EVENT_END="end";o.plugins=o.plugins||{},o.gestures=o.gestures||{},o.READY=!1;var g=o.utils={extend:function(t,e,i){for(var r in e)t[r]!==n&&i||(t[r]=e[r]);return t},each:function(t,e,i){var r,o;if("forEach"in t)t.forEach(e,i);else if(t.length!==n){for(r=-1;o=t[++r];)if(e.call(i,o,r,t)===!1)return}else for(r in t)if(t.hasOwnProperty(r)&&e.call(i,t[r],r,t)===!1)return},inStr:function(t,e){return t.indexOf(e)>-1},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],i=[],n=[],r=[],o=Math.min,s=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(g.each(t,function(t){e.push(t.pageX),i.push(t.pageY),n.push(t.clientX),r.push(t.clientY)}),{pageX:(o.apply(Math,e)+s.apply(Math,e))/2,pageY:(o.apply(Math,i)+s.apply(Math,i))/2,clientX:(o.apply(Math,n)+s.apply(Math,n))/2,clientY:(o.apply(Math,r)+s.apply(Math,r))/2})},getVelocity:function(t,e,i){return{x:Math.abs(e/t)||0,y:Math.abs(i/t)||0}},getAngle:function(t,e){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var i=Math.abs(t.clientX-e.clientX),n=Math.abs(t.clientY-e.clientY);return i>=n?t.clientX-e.clientX>0?a:h:t.clientY-e.clientY>0?c:s},getDistance:function(t,e){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==c||t==s},toggleDefaultBehavior:function(t,e,i){if(e&&t&&t.style){g.each(["webkit","moz","Moz","ms","o",""],function(n){g.each(e,function(e,r){n&&(r=n+r.substring(0,1).toUpperCase()+r.substring(1)),r in t.style&&(t.style[r]=!i&&e)})});var n=function(){return!1};"none"==e.userSelect&&(t.onselectstart=!i&&n),"none"==e.userDrag&&(t.ondragstart=!i&&n)}}};o.Instance=function(t,e){var i=this;return r(),this.element=t,this.enabled=!0,this.options=g.extend(g.extend({},o.defaults),e||{}),this.options.stop_browser_behavior&&g.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!1),this.eventStartHandler=b.onTouch(t,d,function(t){i.enabled&&j.startDetect(i,t)}),this.eventHandlers=[],this},o.Instance.prototype={on:function(t,e){var i=t.split(" ");return g.each(i,function(t){this.element.addEventListener(t,e,!1),this.eventHandlers.push({gesture:t,handler:e})},this),this},off:function(t,e){var i,n,r=t.split(" ");return g.each(r,function(t){for(this.element.removeEventListener(t,e,!1),i=-1;n=this.eventHandlers[++i];)n.gesture===t&&n.handler===e&&this.eventHandlers.splice(i,1)},this),this},trigger:function(t,e){e||(e={});var i=o.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e;var n=this.element;return g.hasParent(e.target,n)&&(n=e.target),n.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(this.options.stop_browser_behavior&&g.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!0),t=-1;e=this.eventHandlers[++t];)this.element.removeEventListener(e.gesture,e.handler,!1);return this.eventHandlers=[],b.unbindDom(this.element,o.EVENT_TYPES[d],this.eventStartHandler),null}};var v=null,y=!1,w=!1,b=o.event={bindDom:function(t,e,i){var n=e.split(" ");g.each(n,function(e){t.addEventListener(e,i,!1)})},unbindDom:function(t,e,i){var n=e.split(" ");g.each(n,function(e){t.removeEventListener(e,i,!1)})},onTouch:function(t,e,i){var n=this,r=function(r){var s=r.type.toLowerCase();if(!g.inStr(s,"mouse")||!w){g.inStr(s,"touch")||g.inStr(s,"pointerdown")||g.inStr(s,"mouse")&&1===r.which?y=!0:g.inStr(s,"mouse")&&!r.which&&(y=!1),(g.inStr(s,"touch")||g.inStr(s,"pointer"))&&(w=!0);var a=0;y&&(o.HAS_POINTEREVENTS&&e!=m?a=E.updatePointer(e,r):g.inStr(s,"touch")?a=r.touches.length:w||(a=g.inStr(s,"up")?0:1),a>0&&e==m?e=f:a||(e=m),(a||null===v)&&(v=r),i.call(j,n.collectEventData(t,e,n.getTouchList(v,e),r)),o.HAS_POINTEREVENTS&&e==m&&(a=E.updatePointer(e,r))),a||(v=null,y=!1,w=!1,E.reset())}};return this.bindDom(t,o.EVENT_TYPES[e],r),r},determineEventTypes:function(){var t;t=o.HAS_POINTEREVENTS?E.getEvents():o.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],o.EVENT_TYPES[d]=t[0],o.EVENT_TYPES[f]=t[1],o.EVENT_TYPES[m]=t[2]},getTouchList:function(t){return o.HAS_POINTEREVENTS?E.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,e,i,n){var r=l;return(g.inStr(n.type,"mouse")||E.matchType(u,n))&&(r=u),{center:g.getCenter(i),timeStamp:Date.now(),target:n.target,touches:i,eventType:e,pointerType:r,srcEvent:n,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return j.stopDetect()}}}},E=o.PointerEvent={pointers:{},getTouchList:function(){var t=[];return g.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){return t==m?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var i=e.pointerType,n={};return n[u]=i===u,n[l]=i===l,n[p]=i===p,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},j=o.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:g.extend({},e),lastEvent:!1,lastVelocityEvent:!1,velocity:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,i=e.options;return g.each(this.gestures,function(n){return this.stopped||i[n.name]===!1||e.enabled===!1||n.handler.call(n,t,e)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=t),t.eventType==m&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=g.extend({},this.current),this.current=null,this.stopped=!0},getVelocityData:function(t,e,i,n){var r=this.current,s=r.lastVelocityEvent,a=r.velocity;s&&t.timeStamp-s.timeStamp>o.UPDATE_VELOCITY_INTERVAL?(a=g.getVelocity(t.timeStamp-s.timeStamp,t.center.clientX-s.center.clientX,t.center.clientY-s.center.clientY),r.lastVelocityEvent=t):r.velocity||(a=g.getVelocity(e,i,n),r.lastVelocityEvent=t),r.velocity=a,t.velocityX=a.x,t.velocityY=a.y},getInterimData:function(t){var e,i,n=this.current.lastEvent;t.eventType==m?(e=n&&n.interimAngle,i=n&&n.interimDirection):(e=n&&g.getAngle(n.center,t.center),i=n&&g.getDirection(n.center,t.center)),t.interimAngle=e,t.interimDirection=i},extendEventData:function(t){var e=this.current,i=e.startEvent;(t.touches.length!=i.touches.length||t.touches===i.touches)&&(i.touches=[],g.each(t.touches,function(t){i.touches.push(g.extend({},t))}));var n=t.timeStamp-i.timeStamp,r=t.center.clientX-i.center.clientX,o=t.center.clientY-i.center.clientY;return this.getVelocityData(t,n,r,o),this.getInterimData(t),g.extend(t,{startEvent:i,deltaTime:n,deltaX:r,deltaY:o,distance:g.getDistance(i.center,t.center),angle:g.getAngle(i.center,t.center),direction:g.getDirection(i.center,t.center),scale:g.getScale(i.touches,t.touches),rotation:g.getRotation(i.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return e[t.name]===n&&(e[t.name]=!0),g.extend(o.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}};o.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){var i=j.current;if(i.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case d:this.triggered=!1;break;case f:if(t.distance<e.options.drag_min_distance&&i.name!=this.name)return;var n=i.startEvent.center;if(i.name!=this.name&&(i.name=this.name,e.options.correct_for_drag_min_distance&&t.distance>0)){var r=Math.abs(e.options.drag_min_distance/t.distance);n.pageX+=t.deltaX*r,n.pageY+=t.deltaY*r,n.clientX+=t.deltaX*r,n.clientY+=t.deltaY*r,t=j.extendEventData(t)}(i.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var o=i.lastEvent.direction;t.drag_locked_to_axis&&o!==t.direction&&(t.direction=g.isVertical(o)?t.deltaY<0?c:s:t.deltaX<0?a:h),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t);var u=g.isVertical(t.direction);(e.options.drag_block_vertical&&u||e.options.drag_block_horizontal&&!u)&&t.preventDefault();break;case m:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},o.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:2},timer:null,handler:function(t,e){switch(t.eventType){case d:clearTimeout(this.timer),j.current.name=this.name,this.timer=setTimeout(function(){"hold"==j.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case f:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case m:clearTimeout(this.timer)}}},o.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==m&&e.trigger(this.name,t)}},o.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==m){if(t.touches.length<e.options.swipe_min_touches||t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},o.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},has_moved:!1,handler:function(t,e){var i,n,r;t.eventType==d?this.has_moved=!1:t.eventType!=f||this.moved?t.eventType==m&&"touchcancel"!=t.srcEvent.type&&t.deltaTime<e.options.tap_max_touchtime&&!this.has_moved&&(i=j.previous,n=i&&i.lastEvent&&t.timeStamp-i.lastEvent.timeStamp,r=!1,i&&"tap"==i.name&&n&&n<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(j.current.name="tap",e.trigger(j.current.name,t))):this.has_moved=t.distance>e.options.tap_max_distance}},o.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==u?void t.stopDetect():(e.options.prevent_default&&t.preventDefault(),void(t.eventType==d&&e.trigger(this.name,t)))}},o.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1,transform_within_instance:!1},triggered:!1,handler:function(t,e){if(j.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2)){if(e.options.transform_always_block&&t.preventDefault(),e.options.transform_within_instance)for(var i=-1;t.touches[++i];)if(!g.hasParent(t.touches[i].target,e.element))return;switch(t.eventType){case d:this.triggered=!1;break;case f:var n=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(n<e.options.transform_min_scale&&r<e.options.transform_min_rotation)return;j.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),r>e.options.transform_min_rotation&&e.trigger("rotate",t),n>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case m:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}}},"function"==typeof t&&t.amd?t(function(){return o}):"object"==typeof i&&i.exports?i.exports=o:e.Hammer=o}(window)},{}],4:[function(t,e){"use strict";function i(t){t.preventDefault()}var n=t("../bower_components/eventEmitter/EventEmitter.js"),r=t("../bower_components/hammerjs/hammer.js"),o="ontouchstart"in document.documentElement,s=t("./utils.js"),a=t("../bower_components/easy-tween/dist/easyTween.js"),c=e.exports=function(t){this.container=t,this.element=document.createElement("div"),this.element.style.position="absolute",t.appendChild(this.element),this.refit(),this.emitter=new n,this.horizontalPosition=0,this.verticalPosition=0,this.horizontalVelocity=0,this.verticalVelocity=0,this.cssTransitions={},this.cssFilters={},this.cssTransforms={},this.pointerEventHandler=this.pointerEventHandler.bind(this),this.dragEventHandler=this.dragEventHandler.bind(this),this.transformStep=this.transformStep.bind(this)};c.create=function(t){var e=new c(t);return c.getApi(e)},c.getApi=function(t){var e={};return e.on=t.emitter.on.bind(t.emitter),e.removeListener=t.emitter.removeListener.bind(t.emitter),e.refit=t.refit.bind(t),e.element=t.element,e.container=t.container,e.css=t.setCssStyle.bind(t),e.cssTransform=t.setCssTransform.bind(t),e.cssFilter=t.setCssFilter.bind(t),e.cssTransition=t.setCssTransition.bind(t),e.speed=t.setVelocityScalar.bind(t),e.horizontalSpeed=t.setHorizontalVelocityScalar.bind(t),e.verticalSpeed=t.setVerticalVelocityScalar.bind(t),e.horizontalWind=t.setBaseHorizontalVelocity.bind(t),e.verticalWind=t.setBaseVerticalVelocity.bind(t),Object.defineProperty(e,"speedGradient",{get:function(){return t.horizontalVelocityGradient===t.verticalVelocityGradient?t.horizontalVelocityGradient:void 0},set:function(e){t.horizontalVelocityGradient=e,t.verticalVelocityGradient=e}}),Object.defineProperty(e,"horizontalVelocityGradient",{get:function(){return t.horizontalVelocityGradient},set:function(e){t.horizontalVelocityGradient=e}}),Object.defineProperty(e,"verticalVelocityGradient",{get:function(){return t.verticalVelocityGradient},set:function(e){t.verticalVelocityGradient=e}}),Object.defineProperty(e,"width",{get:function(){return t.width}}),Object.defineProperty(e,"height",{get:function(){return t.height}}),Object.defineProperty(e,"top",{get:function(){return t.top}}),Object.defineProperty(e,"left",{get:function(){return t.left}}),e},c.prototype.horizontalVelocityScalar=0,c.prototype.verticalVelocityScalar=0,c.prototype.baseHorizontalVelocity=0,c.prototype.baseVerticalVelocity=0,c.prototype.msPerStep=16,c.prototype.horizontalVelocityGradient=a.easing.quadraticIn,c.prototype.verticalVelocityGradient=a.easing.quadraticIn,c.prototype.pointerTrackingEvents=["mousemove"],c.prototype.refit=function(){var t=this.container.getBoundingClientRect();this.width=t.width,this.halfWidth=this.width/2,this.height=t.height,this.halfHeight=this.height/2,this.top=t.top,this.left=t.left},c.prototype.startTransformLoop=function(){this.transforming||(this.transforming=!0,this.lastStepTime=Date.now(),this.animationRequestId=requestAnimationFrame(this.transformStep),this.attachPointerListeners(),this.emitter.emit("move start"))},c.prototype.stopTransformLoop=function(){this.transforming&&(this.transforming=!1,cancelAnimationFrame(this.animationRequestId),this.emitter.emit("move stop"))},c.prototype.transformStep=function(){var t=Date.now(),e=(t-this.lastStepTime)/this.msPerStep;this.lastHorizontalDisplacement=e*(this.baseHorizontalVelocity+this.horizontalVelocity*this.horizontalVelocityScalar),this.lastVerticalDisplacement=e*(this.baseVerticalVelocity+this.verticalVelocity*this.verticalVelocityScalar),this.lastStepTime=t,this.lastHorizontalDisplacement||this.lastVerticalDisplacement?(this.horizontalPosition+=this.lastHorizontalDisplacement,this.verticalPosition+=this.lastVerticalDisplacement,this.setCssTransform("translate",this.horizontalPosition+"px, "+this.verticalPosition+"px"),this.animationRequestId=requestAnimationFrame(this.transformStep)):(this.trackingPointer||this.baseHorizontalVelocity||this.baseVerticalVelocity)&&(this.animationRequestId=requestAnimationFrame(this.transformStep))},c.prototype.setBaseHorizontalVelocity=function(t,e,i){return void 0===t?this.baseHorizontalVelocity:(this.horizontalWindTween&&this.horizontalWindTween.pause(),void(e?(e*=1e3,i=i||this.baseHorizontalVelocity<t?a.easing.quadraticIn:a.easing.quadraticOut,this.horizontalWindTween=a(i,this,"baseHorizontalVelocity",t,e)):this.baseHorizontalVelocity=t))},c.prototype.setBaseVerticalVelocity=function(t,e,i){return void 0===t?this.baseVerticalVelocity:(this.verticalWindTween&&this.verticalWindTween.pause(),void(e?(e*=1e3,i=i||this.baseVerticalVelocity<t?a.easing.quadraticIn:a.easing.quadraticOut,this.verticalWindTween=a(i,this,"baseVerticalVelocity",t,e)):this.baseVerticalVelocity=t))},c.prototype.setVelocityScalar=function(t,e,i,n){return void 0===t?this.horizontalVelocityScalar===this.verticalVelocityScalar?this.horizontalVelocityScalar:void 0:(this.setHorizontalVelocityScalar(t,e,i,n),void this.setVerticalVelocityScalar(t,e,i))},c.prototype.setHorizontalVelocityScalar=function(t,e,i,n){return void 0===t?this.horizontalVelocityScalar:(this.horizontalSpeedTween&&this.horizontalSpeedTween.pause(),void(e?(e*=1e3,i=i||this.horizontalVelocityScalar<t?a.easing.quadraticIn:a.easing.quadraticOut,this.horizontalSpeedTween=a(i,this,"horizontalVelocityScalar",t,e,n)):this.horizontalVelocityScalar=t))},c.prototype.setVerticalVelocityScalar=function(t,e,i,n){return void 0===t?this.verticalVelocityScalar:(this.verticalSpeedTween&&this.verticalSpeedTween.pause(),void(e?(e*=1e3,i=i||this.verticalVelocityScalar<t?a.easing.quadraticIn:a.easing.quadraticOut,this.verticalSpeedTween=a(i,this,"verticalVelocityScalar",t,e,n)):this.verticalVelocityScalar=t))},c.prototype.attachPointerListeners=function(){this.trackingPointer||(this.trackingPointer=!0,o?(r(this.container).on("drag",this.dragEventHandler),this.container.addEventListener("touchmove",i)):this.container.addEventListener("mousemove",this.pointerEventHandler),this.emitter.emit("pointer tracking start"))},c.prototype.detachPointerListeners=function(){this.trackingPointer&&(this.trackingPointer=!1,o?(r(this.container).off("drag",this.dragEventHandler),this.container.removeEventListener("touchmove",i)):this.container.removeEventListener("mousemove",this.pointerEventHandler),this.emitter.emit("pointer tracking stop"))},c.prototype.dragEventHandler=function(t){this.horizontalVelocity=t.gesture.velocityX,this.verticalVelocity=t.gesture.velocityY,this.horizontalVelocity<.1&&(this.horizontalVelocity=0),this.verticalVelocity<.1&&(this.verticalVelocity=0),this.horizontalVelocity>1&&(this.horizontalVelocity=1),this.verticalVelocity>1&&(this.verticalVelocity=1),t.gesture.deltaX<0&&(this.horizontalVelocity*=-1),t.gesture.deltaY<0&&(this.verticalVelocity*=-1)},c.prototype.pointerEventHandler=function(t){var e=t.changedTouches&&t.changedTouches[0]||t,i=e.clientX-this.left,n=e.clientY-this.top;this.horizontalVelocity=this.horizontalVelocityGradient(i-this.halfWidth,0,i>this.halfWidth?-1:1,this.halfWidth),this.verticalVelocity=this.verticalVelocityGradient(n-this.halfHeight,0,n>this.halfHeight?-1:1,this.halfHeight)},c.prototype.setCssStyle=function(t,e,i){return void 0===e?this.element.style[t]:(void 0!==i&&this.setCssTransition(t,i+"s"),void(this.element.style[t]=e))},c.prototype.setCssTransform=function(t,e){return void 0===e?this.cssTransforms[t]:(this.cssTransforms[t]=e,void this.updateMultiAttributeStyle(s.transformAttribute,this.cssTransforms))},c.prototype.setCssFilter=function(t,e,i){return void 0===e?this.cssFilters[t]:(void 0!==i&&this.setCssTransition(s.cssFilterAttribute,i+"s"),this.cssFilters[t]=e,void this.updateMultiAttributeStyle(s.filterAttribute,this.cssFilters))},c.prototype.setCssTransition=function(t,e){return void 0===e?this.cssTransitions[t]:(this.cssTransitions[t]=e,void this.updateMultiAttributeStyle(s.transitionAttribute,this.cssTransitions,!0))},c.prototype.updateMultiAttributeStyle=function(t,e,i){var n,r="",o=!0;for(n in e)e.hasOwnProperty(n)&&(o?o=!1:r+=i?", ":" ",r+=i?n+" "+e[n]:n+"("+e[n]+")");this.element.style[t]=r}},{"../bower_components/easy-tween/dist/easyTween.js":1,"../bower_components/eventEmitter/EventEmitter.js":2,"../bower_components/hammerjs/hammer.js":3,"./utils.js":5}],5:[function(t,e,i){"use strict";var n=i.noop=function(){};i.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||n;var r=document.body.style;i.transformAttribute=void 0!==r.msTransform&&"msTransform"||void 0!==r.webkitTransform&&"webkitTransform"||void 0!==r.MozTransform&&"MozTransform"||"transform",i.transitionAttribute=void 0!==r.msTransition&&"msTransition"||void 0!==r.webkitTransition&&"webkitTransition"||void 0!==r.MozTransition&&"MozTransition"||"transition",i.filterAttribute=void 0!==r.msFilter&&"msFilter"||void 0!==r.webkitFilter&&"webkitFilter"||void 0!==r.MozFilter&&"MozFilter"||"filter",i.cssFilterAttribute=void 0!==r.msFilter&&"-ms-filter"||void 0!==r.webkitFilter&&"-webkit-filter"||void 0!==r.MozFilter&&"-moz-filter"||"filter",i.cssTransformAttribute=void 0!==r.msTransform&&"-ms-transform"||void 0!==r.webkitTransform&&"-webkit-transform"||void 0!==r.MozTransform&&"-moz-transform"||"filter"},{}]},{},[4])(4)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(){!function(e){"use strict";function i(){}function n(t,e){if(o)return e.indexOf(t);for(var i=e.length;i--;)if(e[i]===t)return i;return-1}var r=i.prototype,o=Array.prototype.indexOf?!0:!1;r._getEvents=function(){return this._events||(this._events={})},r.getListeners=function(t){var e=this._getEvents();return e[t]||(e[t]=[])},r.addListener=function(t,e){var i=this.getListeners(t);return-1===n(e,i)&&i.push(e),this},r.on=r.addListener,r.removeListener=function(t,e){var i=this.getListeners(t),r=n(e,i);return-1!==r&&(i.splice(r,1),0===i.length&&this.removeEvent(t)),this},r.off=r.removeListener,r.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},r.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},r.manipulateListeners=function(t,e,i){var n,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(r=e[n])&&("function"==typeof r?o.call(this,n,r):s.call(this,n,r));else for(n=i.length;n--;)o.call(this,e,i[n]);return this},r.removeEvent=function(t){return t?delete this._getEvents()[t]:delete this._events,this},r.emitEvent=function(t,e){for(var i,n=this.getListeners(t),r=n.length;r--;)i=e?n[r].apply(null,e):n[r](),i===!0&&this.removeListener(t,n[r]);return this},r.trigger=r.emitEvent,r.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof t&&t.amd?t(function(){return i}):e.EventEmitter=i}(this)},{}],4:[function(e,i,n){(function(r){!function(e){if("object"==typeof n&&"undefined"!=typeof i)i.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof r?o=r:"undefined"!=typeof self&&(o=self),o.GiantQuadtree=e()}}(function(){return function t(i,n,r){function o(a,c){if(!n[a]){if(!i[a]){var h="function"==typeof e&&e;if(!c&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};i[a][0].call(u.exports,function(t){var e=i[a][1][t];return o(e?e:t)},u,u.exports,t,i,n,r)
}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e){"use strict";function i(t,e,i,n,r){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=n,this.right=this.left+this.width,this.bottom=this.top+this.height,this.isBase=this.width/2<this.minimumSize,this.parent=r}e.exports=i,i.prototype.tl=void 0,i.prototype.tr=void 0,i.prototype.br=void 0,i.prototype.bl=void 0,i.prototype.objectLimit=200,i.prototype.minimumSize=3e3,i.prototype.clear=function(){this.objects=[],this.tl&&(this.tl.clear(),this.tr.clear(),this.br.clear(),this.bl.clear())},i.prototype.getObjects=function(){return this.tl?this.objects.concat(this.tl.getObjects(),this.tr.getObjects(),this.br.getObjects(),this.bl.getObjects()):this.objects.slice()},i.prototype.split=function(){var t=this.width/2,e=this.height/2,n=this.left,r=this.top;this.tl=new i(n,r,t,e,this),this.tr=new i(n+t,r,t,e,this),this.br=new i(n+t,r+e,t,e,this),this.bl=new i(n,r+e,t,e,this)},i.prototype.parentNode=function(t){var e,i=this;return t.left<i.left?e=t.top<i.top?i.grow(i.width,i.height):i.grow(i.width,0):t.left+t.width>i.left+i.width?e=t.top<i.top?i.grow(0,i.height):i.grow(0,0):t.top<i.top?e=i.grow(0,i.height):t.top+t.height>i.top+i.height&&(e=i.grow(0,0)),e?e.parentNode(t):i},i.prototype.getQuadrantAt=function(t,e){if(!this.tl)return this;var i=this.left+this.width/2,n=this.top+this.height/2;return i>t?n>e?this.tl.tl&&this.tl.getQuadrantAt(t,e)||this.tl:this.bl.tl&&this.bl.getQuadrantAt(t,e)||this.bl:n>e?this.tr.tl&&this.tr.getQuadrantAt(t,e)||this.tr:this.br.tl&&this.br.getQuadrantAt(t,e)||this.br},i.prototype.getInteractableObjects=function(t,e,i,n){if(!this.tl)return this.objects.slice();for(var r=this.getQuadrant(t,e,i,n),o=[r.objects],s=[r],a=r.parent;a;)o.push(a.objects),s.push(a),a=a.parent;if(r.tl){var c=r.getQuadrantAt(t,e);~s.indexOf(c)||(s.push(c),o.push(c.objects),c.parent&&!~s.indexOf(c.parent)&&(s.push(c.parent),o.push(c.parent.objects))),c=r.getQuadrantAt(t+i,e),~s.indexOf(c)||(s.push(c),o.push(c.objects),c.parent&&!~s.indexOf(c.parent)&&(s.push(c.parent),o.push(c.parent.objects))),c=r.getQuadrantAt(t+i,e+n),~s.indexOf(c)||(s.push(c),o.push(c.objects),c.parent&&!~s.indexOf(c.parent)&&(s.push(c.parent),o.push(c.parent.objects))),c=r.getQuadrantAt(t,e+n),~s.indexOf(c)||(s.push(c),o.push(c.objects),c.parent&&!~s.indexOf(c.parent)&&o.push(c.parent.objects))}return Array.prototype.concat.apply([],o)},i.prototype.getQuadrant=function(t,e,i,n){if(!this.tl)return this;var r=this.left+this.width/2,o=this.top+this.height/2,s=o>e&&o>e+n,a=e>o;if(r>t&&r>t+i){if(s)return this.tl.tl&&this.tl.getQuadrant(t,e,i,n)||this.tl;if(a)return this.bl.tl&&this.bl.getQuadrant(t,e,i,n)||this.bl}else if(t>r){if(s)return this.tr.tl&&this.tr.getQuadrant(t,e,i,n)||this.tr;if(a)return this.br.tl&&this.br.getQuadrant(t,e,i,n)||this.br}return this},i.prototype.insert=function(t){var e,i,n,r,o,s;if(s=this.parentNode(t),e=s.getQuadrant(t.left,t.top,t.width,t.height),e!==s)e.insert(t);else if(o=s.objects,o.push(t),i=0,n=o.length,!this.isBase&&n>s.objectLimit){for(s.tl||s.split(),r=[];n>i;i++)t=s.objects[i],e=s.getQuadrant(t.left,t.top,t.width,t.height),e!==s?e.insert(t):r.push(t);s.objects=r}return s},i.prototype.grow=function(t,e){var n=this.left-t,r=this.top-e,o=new i(n,r,2*this.width,2*this.height);return this.parent=o,t?e?o.br=this:o.tr=this:e?o.bl=this:o.tl=this,o.tl=o.tl||new i(n,r,this.width,this.height,this),o.tr=o.tr||new i(n+this.width,r,this.width,this.height,this),o.br=o.br||new i(n+this.width,r+this.height,this.width,this.height,this),o.bl=o.bl||new i(n,r+this.height,this.width,this.height,this),o}},{}],2:[function(t,e){"use strict";function i(t,e,n,r,o){if(!o.tl)return o;if(t<o.tr.left){if(n<o.tr.left){if(r<o.bl.top)return i(t,e,n,r,o.tl);if(e>o.bl.top)return i(t,e,n,r,o.bl)}}else{if(r<o.br.top)return i(t,e,n,r,o.tr);if(e>o.br.top)return i(t,e,n,r,o.br)}return o}var n=t("./node"),r=e.exports=function(t,e){t&&(this.width=t,this.height=e?e:t),this.reset()};r.create=function(t,e){var i=new r(t,e);return r.getApi(i)},r.getApi=function(t){var e={};return e.insert=t.insert.bind(t),e.reset=t.reset.bind(t),e.getObjects=t.getObjects.bind(t),e.get=e.getObjects,e.prune=t.prune.bind(t),e},r.prototype.width=1e4,r.prototype.height=1e4,r.prototype.reset=function(t,e){t=t||0,e=e||0,this.top=new n(t,e,this.width,this.height)},r.prototype.insert=function(t){this.top=this.top.insert(t)},r.prototype.getContainingNode=function(t,e,n,r){return t<this.top.left||e<this.top.top||n>this.top.right||r>this.top.bottom?void 0:i(t,e,n,r,this.top)},r.prototype.minimumSize=3e3,r.prototype.getInteractableObjects=function(t,e,i,n){function r(t,e,i,n){var r=c.getContainingNode(t,e,i,n);r&&!~l.indexOf(r.objects)&&l.push(r.objects)}var o,s,a,c=this,h=this.minimumSize,u=this.getContainingNode(t,e,t+1,e+1),l=u?[u.getObjects()]:[];return!u||u.right<i?(o=this.getContainingNode(i-1,e,i,e+1),o?l.push(o.getObjects()):o=u):o=u,!u||u.bottom<n?(s=this.getContainingNode(t,n-1,t+1,n),s?l.push(s.getObjects()):s=u):s=u,!o||o.bottom<n?!s||s.right<i?(a=this.getContainingNode(i-1,n-1,i,n),a?l.push(a.getObjects()):a=s):a=s:a=o,u!==o&&r(t,e,i,e+1),o!==a&&r(i-1,e,i,n),a!==s&&r(t,n-1,i,n),s!==u&&r(t,e,t+1,n),u&&(t-h<u.left&&r(t-h,e,t+1,e+1),e-h<u.top&&r(t,e-h,t+1,e+1)),o&&(o!==u&&e-h<o.top&&r(i-1,e-h,i,e+1),i+h>o.right&&r(i-1,e,i+h,e+1)),a&&(a!==o&&i+h>a.right&&r(i-1,n-1,i+h,n),n+h>a.bottom&&r(i-1,n-1,i,n+h)),s&&(s!==a&&n+h>s.bottom&&r(t,n-1,t+1,n+h),s!==u&&t-h<s.left&&r(t-h,n-1,t+1,n)),Array.prototype.concat.apply([],l)},r.prototype.getObjects=function(t,e,i,n){if(void 0!==t){for(var r,o=e+n,s=t+i,a=this.getInteractableObjects(t,e,s,o),c=a.length,h=[];c--;)r=a[c],(e<=r.top?o>=r.top:r.bottom>=e)&&(t<=r.left?s>=r.left:r.right>=t)&&h.push(r);return h}return this.top.getObjects()},r.prototype.prune=function(t,e,i,n){for(var r,o=t+i,s=e+n,a=[],c=[],h=this.top.getObjects(),u=0,l=h.length;l>u;u++)r=h[u],r.left<t||r.top<e||r.left+r.width>o||r.top+r.height>s?a.push(r):c.push(r);if(c.length)for(this.reset(c[0].left,c[0].top),u=0,l=c.length;l>u;u++)this.insert(c[u]);else this.reset();return a}},{"./node":1}]},{},[2])(2)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,i,n){!function(e,i){if("object"==typeof n&&n)i(n);else{var r={};i(r),"function"==typeof t&&t.amd?t(r):e.Mustache=r}}(this,function(t){function e(t,e){return b.call(t,e)}function i(t){return!e(g,t)}function n(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t){return String(t).replace(/[&<>"'\/]/g,function(t){return _[t]})}function s(t){this.string=t,this.tail=t,this.pos=0}function a(t,e){this.view=null==t?{}:t,this.parent=e,this._cache={".":this.view}}function c(){this.clearCache()}function h(e,i,r,o){function s(t){return i.render(t,r)}for(var a,c,u,l="",p=0,d=e.length;d>p;++p)switch(a=e[p],c=a[1],a[0]){case"#":if(u=r.lookup(c),"object"==typeof u||"string"==typeof u)if(j(u))for(var f=0,m=u.length;m>f;++f)l+=h(a[4],i,r.push(u[f]),o);else u&&(l+=h(a[4],i,r.push(u),o));else if(n(u)){var g=null==o?null:o.slice(a[3],a[5]);u=u.call(r.view,g,s),null!=u&&(l+=u)}else u&&(l+=h(a[4],i,r,o));break;case"^":u=r.lookup(c),(!u||j(u)&&0===u.length)&&(l+=h(a[4],i,r,o));break;case">":u=i.getPartial(c),n(u)&&(l+=u(r));break;case"&":u=r.lookup(c),null!=u&&(l+=u);break;case"name":u=r.lookup(c),null!=u&&(l+=t.escape(u));break;case"text":l+=c}return l}function u(t){for(var e,i=[],n=i,r=[],o=0,s=t.length;s>o;++o)switch(e=t[o],e[0]){case"#":case"^":r.push(e),n.push(e),n=e[4]=[];break;case"/":var a=r.pop();a[5]=e[2],n=r.length>0?r[r.length-1][4]:i;break;default:n.push(e)}return i}function l(t){for(var e,i,n=[],r=0,o=t.length;o>r;++r)e=t[r],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(i=e,n.push(e)));return n}function p(t){return[new RegExp(r(t[0])+"\\s*"),new RegExp("\\s*"+r(t[1]))]}function d(e,n){function o(){if(x&&!S)for(;k.length;)delete T[k.pop()];else k=[];x=!1,S=!1}if(e=e||"",n=n||t.tags,"string"==typeof n&&(n=n.split(m)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var a,c,h,d,g,b,E=p(n),j=new s(e),_=[],T=[],k=[],x=!1,S=!1;!j.eos();){if(a=j.pos,h=j.scanUntil(E[0]))for(var V=0,A=h.length;A>V;++V)d=h.charAt(V),i(d)?k.push(T.length):S=!0,T.push(["text",d,a,a+1]),a+=1,"\n"==d&&o();if(!j.scan(E[0]))break;if(x=!0,c=j.scan(w)||"name",j.scan(f),"="===c?(h=j.scanUntil(v),j.scan(v),j.scanUntil(E[1])):"{"===c?(h=j.scanUntil(new RegExp("\\s*"+r("}"+n[1]))),j.scan(y),j.scanUntil(E[1]),c="&"):h=j.scanUntil(E[1]),!j.scan(E[1]))throw new Error("Unclosed tag at "+j.pos);if(g=[c,h,a,j.pos],T.push(g),"#"===c||"^"===c)_.push(g);else if("/"===c){if(b=_.pop(),!b)throw new Error('Unopened section "'+h+'" at '+a);if(b[1]!==h)throw new Error('Unclosed section "'+b[1]+'" at '+a)}else if("name"===c||"{"===c||"&"===c)S=!0;else if("="===c){if(n=h.split(m),2!==n.length)throw new Error("Invalid tags at "+a+": "+n.join(", "));E=p(n)}}if(b=_.pop())throw new Error('Unclosed section "'+b[1]+'" at '+j.pos);return u(l(T))}var f=/\s*/,m=/\s+/,g=/\S/,v=/\s*=/,y=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,E=Object.prototype.toString,j=Array.isArray||function(t){return"[object Array]"===E.call(t)},_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};s.prototype.eos=function(){return""===this.tail},s.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i}return""},s.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},a.make=function(t){return t instanceof a?t:new a(t)},a.prototype.push=function(t){return new a(t,this)},a.prototype.lookup=function(t){var e;if(t in this._cache)e=this._cache[t];else{for(var i=this;i;){if(t.indexOf(".")>0){e=i.view;for(var r=t.split("."),o=0;null!=e&&o<r.length;)e=e[r[o++]]}else e=i.view[t];if(null!=e)break;i=i.parent}this._cache[t]=e}return n(e)&&(e=e.call(this.view)),e},c.prototype.clearCache=function(){this._cache={},this._partialCache={}},c.prototype.compile=function(e,i){var n=this._cache[e];if(!n){var r=t.parse(e,i);n=this._cache[e]=this.compileTokens(r,e)}return n},c.prototype.compilePartial=function(t,e,i){var n=this.compile(e,i);return this._partialCache[t]=n,n},c.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},c.prototype.compileTokens=function(t,e){var i=this;return function(r,o){if(o)if(n(o))i._loadPartial=o;else for(var s in o)i.compilePartial(s,o[s]);return h(t,i,a.make(r),e)}},c.prototype.render=function(t,e,i){return this.compile(t)(e,i)},t.name="mustache.js",t.version="0.7.3",t.tags=["{{","}}"],t.Scanner=s,t.Context=a,t.Writer=c,t.parse=d,t.escape=o;var T=new c;t.clearCache=function(){return T.clearCache()},t.compile=function(t,e){return T.compile(t,e)},t.compilePartial=function(t,e,i){return T.compilePartial(t,e,i)},t.compileTokens=function(t,e){return T.compileTokens(t,e)},t.render=function(t,e,i){return T.render(t,e,i)},t.to_html=function(e,i,r,o){var s=t.render(e,i,r);return n(o)?void o(s):s}})},{}],6:[function(e,i,n){(function(e){!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof n)e(void 0,n);else if("function"==typeof t)t(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=function(){var t={};return e(void 0,t)}}else e(void 0,Q={})}(function(t,i){"use strict";function n(t){return"[object StopIteration]"===ye(t)||t instanceof le}function r(t,e){e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(we)&&(t.stack=o(t.stack)+"\n"+we+"\n"+o(e.stack))}function o(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var r=e[n];a(r)||s(r)||i.push(r)}return i.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function a(t){var e=/at .+ \((.*):(\d+):\d+\)/.exec(t);if(!e)return!1;var i=e[1],n=e[2];return i===ee&&n>=ie&&xe>=n}function c(){if(Error.captureStackTrace){var t,e,i=Error.prepareStackTrace;return Error.prepareStackTrace=function(i,n){t=n[1].getFileName(),e=n[1].getLineNumber()},(new Error).stack,Error.prepareStackTrace=i,ee=t,e}}function h(t,e,i){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+i+" instead.",new Error("").stack),t.apply(t,arguments)}}function u(){function t(t){i&&(e=E(t),de(i,function(t,i){oe(function(){e.promiseSend.apply(e,i)})},void 0),i=void 0,n=void 0)}var e,i=[],n=[],r=ge(u.prototype),o=ge(p.prototype);return o.promiseSend=function(t,r,o,s){var a=pe(arguments);i?(i.push(a),"when"===t&&s&&n.push(s)):oe(function(){e.promiseSend.apply(e,a)})},o.valueOf=function(){return i?o:e.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(o,u),o.stack=o.stack.substring(o.stack.indexOf("\n")+1)),re(o),r.promise=o,r.resolve=t,r.reject=function(e){t(b(e))},r.notify=function(t){i&&de(n,function(e,i){oe(function(){i(t)})},void 0)},r}function l(t){var e=u();return M(t,e.resolve,e.reject,e.notify).fail(e.reject),e.promise}function p(t,e,i,n){void 0===e&&(e=function(t){return b(new Error("Promise does not support operation: "+t))});var r=ge(p.prototype);return r.promiseSend=function(i,n){var o,s=pe(arguments,2);try{o=t[i]?t[i].apply(r,s):e.apply(r,[i].concat(s))}catch(a){o=b(a)}n&&n(o)},i&&(r.valueOf=i),n&&(r.exception=n),re(r),r}function d(t){return f(t)?t.valueOf():t}function f(t){return t&&"function"==typeof t.promiseSend}function m(t){return t&&"function"==typeof t.then}function g(t){return v(t)||y(t)}function v(t){return!m(d(t))}function y(t){return t=d(t),f(t)&&"exception"in t}function w(){be||"undefined"==typeof window||window.Touch||!window.console||console.log("Should be empty:",je),be=!0}function b(t){var e=p({when:function(e){if(e){var i=fe(Ee,this);-1!==i&&(je.splice(i,1),Ee.splice(i,1))}return e?e(t):b(t)}},function(){return b(t)},function(){return this},t);return w(),Ee.push(e),je.push(t),e}function E(t){if(f(t))return t;if(t=d(t),m(t)){var e=u();return t.then(e.resolve,e.reject,e.notify),e.promise}return p({when:function(){return t},get:function(e){return t[e]},put:function(e,i){return t[e]=i,t},del:function(e){return delete t[e],t},post:function(e,i){return t[e].apply(t,i)},apply:function(e,i){return t.apply(e,i)},fapply:function(e){return t.apply(void 0,e)},viewInfo:function(){function e(t){n[t]||(n[t]=typeof i[t])}for(var i=t,n={};i;)Object.getOwnPropertyNames(i).forEach(e),i=Object.getPrototypeOf(i);return{type:typeof t,properties:n}},keys:function(){return ve(t)}},void 0,function(){return t})}function j(t){return p({isDef:function(){}},function(){var e=pe(arguments);return L.apply(void 0,[t].concat(e))},function(){return d(t)})}function _(t,e){return t=E(t),e?p({viewInfo:function(){return e}},function(){var e=pe(arguments);return L.apply(void 0,[t].concat(e))},function(){return d(t)}):L(t,"viewInfo")}function T(t){return _(t).when(function(e){var i;i="function"===e.type?function(){return Te(t,void 0,arguments)}:{};var n=e.properties||{};return ve(n).forEach(function(e){"function"===n[e]&&(i[e]=function(){return _e(t,e,arguments)})}),E(i)})}function k(t,e,i,n){function o(t){try{return"function"==typeof e?e(t):t}catch(i){return b(i)}}function s(t){if("function"==typeof i){r(t,l);try{return i(t)}catch(e){return b(e)}}return b(t)}function a(t){return"function"==typeof n?n(t):t}var c=u(),h=!1,l=E(t);return oe(function(){l.promiseSend("when",function(t){h||(h=!0,c.resolve(o(t)))},function(t){h||(h=!0,c.resolve(s(t)))})}),l.promiseSend("when",void 0,void 0,function(t){c.notify(a(t))}),c.promise}function x(t,e,i){return k(t,function(t){return D(t).then(function(t){return e.apply(void 0,t)},i)},i)}function S(t){return function(){function e(t,e){var s;try{s=i[t](e)}catch(a){return n(a)?a.value:b(a)}return k(s,r,o)}var i=t.apply(this,arguments),r=e.bind(e,"send"),o=e.bind(e,"throw");return r()}}function V(t){throw new le(t)}function A(t){return function(){return D([this,D(arguments)]).spread(function(e,i){return t.apply(e,i)})}}function O(t){return function(e){var i=pe(arguments,1);return L.apply(void 0,[e,t].concat(i))}}function L(t,e){var i=u(),n=pe(arguments,2);return t=E(t),oe(function(){t.promiseSend.apply(t,[e,i.resolve].concat(n))}),i.promise}function C(t,e,i){var n=u();return t=E(t),oe(function(){t.promiseSend.apply(t,[e,n.resolve].concat(i))}),n.promise}function I(t){return function(e){var i=pe(arguments,1);return C(e,t,i)}}function P(t,e){var i=pe(arguments,2);return Te(t,e,i)}function M(t){var e=pe(arguments,1);return ke(t,e)}function q(t,e){var i=pe(arguments,2);return function(){var n=i.concat(pe(arguments));return Te(t,e,n)}}function H(t){var e=pe(arguments,1);return function(){var i=e.concat(pe(arguments));return ke(t,i)}}function D(t){return k(t,function(t){var e=t.length;if(0===e)return E(t);var i=u();return de(t,function(n,r,o){v(r)?(t[o]=d(r),0===--e&&i.resolve(t)):k(r,function(n){t[o]=n,0===--e&&i.resolve(t)}).fail(i.reject)},void 0),i.promise})}function N(t){return k(t,function(t){return k(D(me(t,function(t){return k(t,ne,ne)})),function(){return me(t,E)})})}function R(t,e){return k(t,void 0,e)}function z(t,e){return k(t,void 0,void 0,e)}function F(t,e){return k(t,function(t){return k(e(),function(){return t})},function(t){return k(e(),function(){return b(t)})})}function U(t,e,n,o){function s(e){oe(function(){if(r(e,t),!i.onerror)throw e;i.onerror(e)})}var a=e||n||o?k(t,e,n,o):t;R(a,s)}function W(t,e){var i=u(),n=setTimeout(function(){i.reject(new Error("Timed out after "+e+" ms"))},e);return k(t,function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)}),i.promise}function Y(t,e){void 0===e&&(e=t,t=void 0);var i=u();return setTimeout(function(){i.resolve(t)},e),i.promise}function B(t,e){var i=pe(e),n=u();return i.push(n.makeNodeResolver()),ke(t,i).fail(n.reject),n.promise}function X(t){var e=pe(arguments,1),i=u();return e.push(i.makeNodeResolver()),ke(t,e).fail(i.reject),i.promise}function G(t){var e=pe(arguments,1);return function(){var i=e.concat(pe(arguments)),n=u();return i.push(n.makeNodeResolver()),ke(t,i).fail(n.reject),n.promise}}function Q(t,e,i){return Z(t,e).apply(void 0,i)}function K(t,e){var i=pe(arguments,2);return Q(t,e,i)}function Z(t){if(arguments.length>1){var e=arguments[1],i=pe(arguments,2),n=t;t=function(){var t=i.concat(pe(arguments));return n.apply(e,t)}}return function(){var e=u(),i=pe(arguments);return i.push(e.makeNodeResolver()),ke(t,i).fail(e.reject),e.promise}}function $(t,e,i){var n=pe(i),r=u();return n.push(r.makeNodeResolver()),_e(t,e,n).fail(r.reject),r.promise}function J(t,e){var i=pe(arguments,2),n=u();return i.push(n.makeNodeResolver()),_e(t,e,i).fail(n.reject),n.promise}function te(t,e){return e?void t.then(function(t){oe(function(){e(null,t)})},function(t){oe(function(){e(t)})}):t}var ee,ie=c(),ne=function(){},re=Object.freeze||ne;"undefined"!=typeof cajaVM&&(re=cajaVM.def);var oe;if("undefined"!=typeof e)oe=e.nextTick;else if("function"==typeof setImmediate)oe=setImmediate;else if("undefined"!=typeof MessageChannel){var se=new MessageChannel,ae={},ce=ae;se.port1.onmessage=function(){ae=ae.next;var t=ae.task;delete ae.task,t()},oe=function(t){ce=ce.next={task:t},se.port2.postMessage(0)}}else oe=function(t){setTimeout(t,0)};var he;if(Function.prototype.bind){var ue=Function.prototype.bind;he=ue.bind(ue.call)}else he=function(t){return function(){return t.call.apply(t,arguments)}};var le,pe=he(Array.prototype.slice),de=he(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;n>i;i++)i in this&&(e=t(e,this[i],i));return e}),fe=he(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),me=he(Array.prototype.map||function(t,e){var i=this,n=[];return de(i,function(r,o,s){n.push(t.call(e,o,s,i))},void 0),n}),ge=Object.create||function(t){function e(){}return e.prototype=t,new e},ve=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e},ye=Object.prototype.toString;le="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var we="From previous event:";i.nextTick=oe,i.defer=u,u.prototype.makeNodeResolver=function(){var t=this;return function(e,i){e?t.reject(e):t.resolve(arguments.length>2?pe(arguments,1):i)}},u.prototype.node=h(u.prototype.makeNodeResolver,"node","makeNodeResolver"),i.promise=l,i.makePromise=p,p.prototype.then=function(t,e,i){return k(this,t,e,i)},p.prototype.thenResolve=function(t){return k(this,function(){return t})},de(["isResolved","isFulfilled","isRejected","when","spread","send","get","put","del","post","invoke","keys","apply","call","bind","fapply","fcall","fbind","all","allResolved","view","viewInfo","timeout","delay","catch","finally","fail","fin","progress","end","done","nfcall","nfapply","nfbind","ncall","napply","nbind","npost","ninvoke","nend","nodeify"],function(t,e){p.prototype[e]=function(){return i[e].apply(i,[this].concat(pe(arguments)))}},void 0),p.prototype.toSource=function(){return this.toString()},p.prototype.toString=function(){return"[object Promise]"},re(p.prototype),i.nearer=d,i.isPromise=f,i.isPromiseAlike=m,i.isResolved=g,i.isFulfilled=v,i.isRejected=y;var be,Ee=[],je=[];i.reject=b,i.begin=E,i.resolve=E,i.ref=h(E,"ref","resolve"),i.master=j,i.viewInfo=_,i.view=T,i.when=k,i.spread=x,i.async=S,i["return"]=V,i.promised=A,i.sender=h(O,"sender","dispatcher"),i.Method=h(O,"Method","dispatcher"),i.send=h(L,"send","dispatch"),i.dispatch=C,i.dispatcher=I,i.get=I("get"),i.put=I("put"),i["delete"]=i.del=I("del");var _e=i.post=I("post");i.invoke=function(t,e){var i=pe(arguments,2);return _e(t,e,i)};var Te=i.apply=h(I("apply"),"apply","fapply"),ke=i.fapply=I("fapply");i.call=h(P,"call","fcall"),i["try"]=M,i.fcall=M,i.bind=h(q,"bind","fbind"),i.fbind=H,i.keys=I("keys"),i.all=D,i.allResolved=N,i["catch"]=i.fail=R,i.progress=z,i["finally"]=i.fin=F,i.end=h(U,"end","done"),i.done=U,i.timeout=W,i.delay=Y,i.nfapply=B,i.nfcall=X,i.nfbind=G,i.napply=h(Q,"napply","npost"),i.ncall=h(K,"ncall","ninvoke"),i.nbind=h(Z,"nbind","nfbind"),i.npost=$,i.ninvoke=J,i.nend=h(te,"nend","nodeify"),i.nodeify=te;var xe=c()})}).call(this,e("Mk2NyG"))},{Mk2NyG:1}],7:[function(t,e){"use strict";var i=e.exports=function(t,e,i){this.element=t,this.top=i||0,this.left=e||0,this.width=this.element.width,this.height=this.element.height,this.bottom=this.top+this.height,this.right=this.left+this.width,t.locations.push(this)};i.prototype.show=function(t){this.visible||(this.visible=!0,this.element.show(this.left,this.top,t))},i.prototype.hide=function(t){this.visible&&(this.visible=!1,this.element.hide(t))}},{}],8:[function(t,e){"use strict";function i(){this.elements=[]}e.exports=i,i.create=function(t){t=t||{};var e=new i;return"skipProbability"in t&&(e.skipProbability=t.skipProbability),"tryLimit"in t&&(e.tryLimit=t.tryLimit),e},i.prototype.chanceMultiplier=1,i.prototype.skipProbability=0,i.prototype.add=function(t){for(var e=t.chanceMultiplier;e--;)this.elements.push(t)},i.prototype.remove=function(t){for(var e;~(e=this.elements.indexOf(t));)this.elements.splice(e,1)},i.prototype.getElements=function(){return this.elements.slice()},i.prototype.getRandomElement=function(){return this.elements[Math.random()*this.elements.length|0]}},{}],9:[function(t,e){"use strict";function i(t,e,i,n,r){for(var o,s=t.length;s--;)if(o=t[s],(i<=o.top?r>=o.top:o.bottom>=i)&&(e<=o.left?n>=o.left:o.right>=e))return!0;return!1}var n=t("../bower_components/q/q.js"),r=t("../bower_components/giant-quadtree/dist/GiantQuadtree.js").create,o=t("../bower_components/big-surface/dist/BigSurface.js"),s=t("./BoundingBox.js"),a=t("./Tag.js"),c=e.exports=function(t){o.call(this,t),this.quadtree=r(15e3),this.tags={},this.activeTags=[],this.updateCanvasDimensions()};c.prototype=Object.create(o.prototype),c.create=function(t){var e=new c(t);return c.getApi(e)},c.getApi=function(t){var e=o.getApi(t);return e.createTag=t.createTag.bind(t),e.configureTag=t.configureTag.bind(t),e.setActiveTags=t.setActiveTags.bind(t),e.pause=t.pause.bind(t),e.resume=t.resume.bind(t),e.load=t.loadElements.bind(t),e.add=t.addElements.bind(t),e.remove=t.removeElement.bind(t),e.get=t.getElements.bind(t),e.showElement=t.showElement.bind(t),e.loader=t.loader,e.fill=function(){return t.updateCanvasDimensions(),t.pickNextElement(),t.nextElement?t.fillCenter():[]},e.start=t.start.bind(t),e},c.loader=t("./loader/index.js"),c.element=t("./element/index.js"),c.prototype.scanTryLimit=20,c.prototype.missLimit=4,c.prototype.elementMargin=25,c.prototype.overScan=0,c.prototype.hidingArea=document.createDocumentFragment(),c.prototype.minElementSize=50,c.prototype.createTag=function(t,e){return this.tags[t]=a.create(e),this.tags[t]},c.prototype.configureTag=function(t,e){var i=this.tags[t];return i?("skipProbability"in e&&(i.skipProbability=e.skipProbability),void("tryLimit"in e&&(i.tryLimit=e.tryLimit))):void this.createTag(e)},c.prototype.loadElements=function(t,e,i){var r,o,s,a,h,u,l,p=this.addElements.bind(this,t),d=[];"string"==typeof e?(r={},r[e]=i):r=e;for(o in r)if(r.hasOwnProperty(o))for(s=c.loader[o],h=r[o],Array.isArray(h)||(h=[h]),u=h.length,a=h[--u];a;)l=s(this,a).then(p),d.push(l),a=h[--u];return n.allResolved(d)},c.prototype.addElements=function(t,e){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);var i,n,r,o=t.length;for(i=t[--o];i;){for(n=this.tags[i]||this.createTag(i),r=e.length;r--;)n.add(e[r]);i=t[--o]}},c.prototype.fadeInToCenter=function(){},c.prototype.removeElement=function(t,e){Array.isArray(t)||(t=[t]);var i,n,r=t.length;for(i=t[r--];i;)n=this.tags[i],n&&(n.remove(e),i=t[r--])},c.prototype.getElements=function(){var t,e,i=arguments.length>0?arguments:Object.keys(this.tags),n=i.length,r=[];for(t=i[--n];t;)e=this.tags[t],e&&(r=r.concat(e.getElements())),t=i[--n];return r},c.prototype.setActiveTags=function(){var t,e,i,n=arguments.length,r=[];for(t=arguments[--n];t;){if(e=this.tags[t])for(i=e.chanceMultiplier;i--;)r.push(e);t=arguments[--n]}this.activeTags=r},c.prototype.getRandomActiveTag=function(){for(var t,e=this.getRandomActiveTagFailSafe;e--&&(t=this.activeTags[Math.random()*this.activeTags.length|0],!(t.skipProbability<Math.random())););return t},c.prototype.pause=function(t){void 0===this.savedHorizontalVelocityScalar&&(this.savedHorizontalVelocityScalar=this.horizontalVelocityScalar,this.savedVerticalVelocityScalar=this.verticalVelocityScalar,this.setVelocityScalar(0,t||.4))},c.prototype.resume=function(t){void 0!==this.savedHorizontalVelocityScalar&&(this.setHorizontalVelocityScalar(this.savedHorizontalVelocityScalar,t||.4),this.setVerticalVelocityScalar(this.savedVerticalVelocityScalar,t||.4),this.savedHorizontalVelocityScalar=void 0)},c.prototype.savedHorizontalVelocityScalar=void 0,c.prototype.savedVerticalVelocityScalar=void 0,c.prototype.getRandomActiveTagFailSafe=20,c.prototype.getRandomElementFailSafe=20,c.prototype.getRandomElementTryLimit=20,c.prototype.maxElementWidth=2e3,c.prototype.maxElementHeight=1e3,c.prototype.getRandomElement=function(){for(var t,e,i,n=this.getRandomElementFailSafe,r=!0,o=this.viewportLeft-this.maxElementWidth,s=this.viewportTop-this.maxElementHeight,a=this.viewportRight+this.maxElementWidth,c=this.viewportBottom+this.maxElementHeight;r&&n--;)for(e=this.getRandomActiveTag(),i=e.tryLimit||this.getRandomElementTryLimit;i--;)if(t=e.getRandomElement(),!t.isIn(o,s,a,c))return t},c.prototype.transformStep=function(){o.prototype.transformStep.call(this),this.updateCanvasDimensions(),this.updateElementVisibility(),this.maxCheckHeight=0,this.maxCheckWidth=0,this.pickNextElement(),this.nextElement&&this.fill()},c.prototype.start=function(){if(arguments.length>0&&this.setActiveTags.apply(this,arguments),0===this.activeTags.length)throw new Error("Unable to start without active tags");this.startTransformLoop(),this.updateCanvasDimensions(),this.pickNextElement(),this.nextElement&&this.fillCenter()},c.prototype.pickNextElement=function(){this.nextElement=this.getRandomElement(),this.missCount=0,this.nextElement&&this.updateBounds()},c.prototype.insertNextElement=function(t,e,i){var n=this.showElement(this.nextElement,t,e,i);return this.pickNextElement(),n},c.prototype.showElement=function(t,e,i,n){var r=new s(t,e,i);return this.quadtree.insert(r),n?r.show(this.element):r.hide(this.hidingArea),r},c.prototype.getViewportBoundingBoxes=function(){return this.quadtree.getObjects(this.viewportLeft,this.viewportTop,this.viewportWidth,this.viewportHeight)},c.prototype.getViewportElements=function(){for(var t=this.getViewportBoundingBoxes(),e=t.length,i=[];e--;)i.push(t[e].element);return i},c.prototype.updateElementVisibility=function(){var t,e,i=this.visibleBoxes||[],n=this.quadtree.getObjects(this.viewportLeft,this.viewportTop,this.viewportWidth,this.viewportHeight);for(t=i.length;t--;)i[t].hidePending=!0;for(t=n.length;t--;)e=n[t],e.visible||e.show(this.element),e.hidePending=!1;for(t=i.length;t--;)e=i[t],e.hidePending&&e.hide(this.hidingArea);this.visibleBoxes=n},c.prototype.updateCanvasDimensions=function(){this.viewportLeft=-1*this.horizontalPosition-this.overScan,this.viewportTop=-1*this.verticalPosition-this.overScan,this.viewportWidth=this.width+2*this.overScan,this.viewportHeight=this.height+2*this.overScan,this.viewportRight=this.viewportLeft+this.viewportWidth,this.viewportBottom=this.viewportTop+this.viewportHeight,this.movingUp=this.lastVerticalDisplacement>0,this.movingLeft=this.lastHorizontalDisplacement>0},c.prototype.fillCenter=function(){for(var t,e,n,r,o=this.quadtree.getObjects(this.viewportLeft-this.checkWidth,this.viewportTop-this.checkHeight,this.viewportWidth+2*this.checkWidth,this.viewportHeight+2*this.checkHeight),s=[],a=0,c=10*this.scanTryLimit,h=0,u=c/20;c>a&&(h++,!(h>u)||(h=0,this.pickNextElement(),this.nextElement));a++)if(t=this.viewportLeft-this.checkWidth+Math.floor((this.viewportWidth+this.checkWidth)*Math.random()),e=this.viewportTop-this.checkHeight+Math.floor((this.viewportHeight+this.checkHeight)*Math.random()),n=t+this.checkWidth,r=e+this.checkHeight,!i(o,t,e,n,r)){if(s.push(this.insertNextElement(t+this.elementMargin,e+this.elementMargin)),!this.nextElement)break;h=0,o=this.quadtree.getObjects(this.viewportLeft-this.checkWidth,this.viewportTop-this.checkHeight,this.viewportWidth+2*this.checkWidth,this.viewportHeight+2*this.checkHeight)}return this.updateElementVisibility(),s},c.prototype.updateBounds=function(){this.checkHeight=this.nextElement.height+2*this.elementMargin,this.checkWidth=this.nextElement.width+2*this.elementMargin,this.checkLeft=this.movingLeft?this.viewportLeft-this.checkWidth:this.viewportRight,this.checkTop=this.movingUp?this.viewportTop-this.checkHeight:this.viewportBottom,this.checkRight=this.checkLeft+this.checkWidth,this.checkBottom=this.checkTop+this.checkHeight,this.scanLeft=this.viewportLeft-this.checkWidth,this.scanTop=this.viewportTop-this.checkHeight,this.scanWidth=this.viewportWidth+this.checkWidth,this.scanHeight=this.viewportHeight+this.checkHeight,this.horizontalBoxes=this.quadtree.getObjects(this.movingLeft?this.viewportLeft-this.checkWidth:this.viewportRight,this.scanTop,this.checkWidth,this.scanHeight+this.checkHeight),this.verticalBoxes=this.quadtree.getObjects(this.scanLeft,this.movingUp?this.viewportTop-this.checkHeight:this.viewportBottom,this.scanWidth+this.checkWidth,this.checkHeight)},c.prototype.fill=function(){var t,e,n,r,o=0,s=this.scanTryLimit;if(this.missCount++,!(this.missCount>this.missLimit)||(this.pickNextElement(),this.nextElement))for(;s>o&&(t=this.scanLeft+Math.floor(this.scanWidth*Math.random()),n=t+this.checkWidth,i(this.verticalBoxes,t,this.checkTop,n,this.checkBottom)||(this.insertNextElement(t+this.elementMargin,this.checkTop+this.elementMargin),this.nextElement));o++)if(e=this.scanTop+Math.floor(this.scanHeight*Math.random()),r=e+this.checkHeight,!i(this.horizontalBoxes,this.checkLeft,e,this.checkRight,r)){var a=this.insertNextElement(this.checkLeft+this.elementMargin,e+this.elementMargin);
if(this.horizontalBoxes.push(a),!this.nextElement)break}}},{"../bower_components/big-surface/dist/BigSurface.js":2,"../bower_components/giant-quadtree/dist/GiantQuadtree.js":4,"../bower_components/q/q.js":6,"./BoundingBox.js":7,"./Tag.js":8,"./element/index.js":14,"./loader/index.js":22}],10:[function(t,e){"use strict";function i(t,e,i){this.element=t,this.width=e||t.width||parseInt(t.clientWidth),this.height=i||t.height||parseInt(t.clientHeight),this.locations=[],this.isVisible=void 0,this.element.style.position="absolute"}e.exports=i,i.create=function(t,e,n){var r=new i(t,e,n);return i.getApi(r)},i.getApi=function(t){var e={};return e.element=t.element,e.isIn=t.isIn.bind(t),e.reposition=t.reposition.bind(t),e.show=t.show.bind(t),e.hide=t.hide.bind(t),Object.defineProperty(e,"width",{get:function(){return t.width}}),Object.defineProperty(e,"visible",{get:function(){return t.isVisible}}),Object.defineProperty(e,"height",{get:function(){return t.height}}),Object.defineProperty(e,"chanceMultiplier",{get:function(){return t.chanceMultiplier},set:function(e){t.chanceMultiplier=e}}),Object.defineProperty(e,"locations",{get:function(){return t.locations}}),e},i.prototype.chanceMultiplier=1,i.prototype.isIn=function(t,e,i,n){for(var r=this.locations.length,o=this.locations[--r];o;){if((t<o.left&&o.left<i||o.right<i&&t<o.right)&&(e<o.top&&o.top<n||o.bottom<n&&e<o.bottom))return!0;o=this.locations[--r]}return!1},i.prototype.reposition=function(t,e){this.element.style.left=t+"px",this.element.style.top=e+"px"},i.prototype.hide=function(){this.isVisible=!1},i.prototype.show=function(t,e){this.reposition(t,e),this.isVisible=!0}},{}],11:[function(t,e){"use strict";function i(t){n.call(this,t,parseInt(t.width),parseInt(t.height)),this.iframe=this.element.querySelector("iframe")||this.element,this.isLocal=this.iframe.contentDocument&&this.iframe.contentDocument.body&&""!==this.iframe.contentDocument.body.innerHTML,r&&this.isLocal&&(this.iframe.contentDocument.body.style.webkitTransform="translate3d(0, 0, 0)"),this.hide()}var n=t("./Element.js");e.exports=i;var r=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;i.prototype=Object.create(n.prototype),i.create=function(t){return t=new i(t),i.getApi(t)},i.getApi=function(t){return n.getApi(t)},i.prototype.hide=function(){n.prototype.hide.call(this),this.element.style.opacity=0,this.fidget&&(clearInterval(this.fidget),this.fidget=void 0)},i.prototype.show=function(t,e){if(n.prototype.show.call(this,t,e),this.element.style.opacity=1,r&&!this.isLocal&&!this.fidget){var i=this.iframe,o=.001;this.fidget=setInterval(function(){i.style.opacity=1+o,o*=-1},200)}}},{"./Element.js":10}],12:[function(t,e){"use strict";function i(t){n.call(this,t,parseInt(t.width),parseInt(t.height)),this.appended=void 0}var n=t("./Element.js");e.exports=i,i.prototype=Object.create(n.prototype),i.create=function(t){return t=new i(t),i.getApi(t)},i.getApi=function(t){return n.getApi(t)},i.prototype.hide=function(){n.prototype.hide.call(this),this.element.style.display="none"},i.prototype.show=function(t,e,i){n.prototype.show.call(this,t,e),this.element.style.display="block",this.appended||(i.appendChild(this.element),this.appended=!0)}},{"./Element.js":10}],13:[function(t,e){"use strict";function i(t,e){r.call(this,t),this.player=e,this.emitter=new n,this.lastReportedTime=0,e.addEventListener("onStateChange",this.statusChangeHandler.bind(this)),e.addEventListener("onError",this.errorHandler.bind(this)),this.hide()}var n=t("../../bower_components/eventEmitter/EventEmitter.js").EventEmitter,r=t("./Element.js");e.exports=i;var o=function(){var t,e=[],i={};return i.add=function(i){e.push(i),1===e.length&&(t=setInterval(function(){e.forEach(function(t){var e=Math.round(t.player.getCurrentTime()),i=e-t.lastReportedTime;if(0!==i)if(1===i)t.lastReportedTime=e,t.emitter.emit("time",e),t.emitter.emit("time:"+e);else for(var n=t.lastReportedTime+1;e>n;n++)t.lastReportedTime=n,t.emitter.emit("time",n),t.emitter.emit("time:"+n)})},500))},i.remove=function(i){var n=e.indexOf(i);~n&&(e.splice(n,1),0===e.length&&clearInterval(t))},i}();i.prototype=Object.create(r.prototype),i.create=function(t,e,n){var r=new i(t,e);return n.continuousPlay&&(r.continuousPlay=!0),n.autoplay&&(r.autoplay=!0),n.loop&&(r.loop=!0),i.getApi(r)},i.getApi=function(t){var e=r.getApi(t);return e.player=t.player,e.element=t.element,e.on=t.emitter.on.bind(t.emitter),e.removeListener=t.emitter.removeListener.bind(t.emitter),e.destroy=t.destroy.bind(t),e},i.prototype.continuousPlay=!1,i.prototype.autoplay=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!1:!0,i.prototype.loop=!1,i.prototype.playing=!1,i.prototype.errorHandler=function(t){150===t.data&&(console.log(this),this.destroy())},i.prototype.destroy=function(){this.height=0,this.width=0,this.bottom=this.top,this.left=this.right,this.element.parentNode.removeChild(this.element)},i.prototype.hide=function(){r.prototype.hide.call(this),this.element.style.opacity=0,this.continuousPlay||this.player.pauseVideo()},i.prototype.show=function(t,e){this.element.style.opacity=1,r.prototype.show.call(this,t,e),this.playing&&!this.continuousPlay?this.player.playVideo():!this.playing&&this.autoplay&&(this.playing=!0,this.player.playVideo())},i.prototype.statusChangeHandler=function(t){switch(t.data){case-1:this.emitter.emit("unstarted");break;case 0:this.emitter.emit("ended"),o.remove(this),this.loop&&(this.player.seekTo(0),this.player.playVideo());break;case 1:this.emitter.emit("playing"),o.add(this);break;case 2:this.emitter.emit("paused"),o.remove(this);break;case 3:this.emitter.emit("buffering");break;case 5:this.emitter.emit("video cued")}}},{"../../bower_components/eventEmitter/EventEmitter.js":3,"./Element.js":10}],14:[function(t,e,i){"use strict";i.Iframe=t("./Iframe.js"),i.Simple=t("./Simple.js"),i.Video=t("./Video.js")},{"./Iframe.js":11,"./Simple.js":12,"./Video.js":13}],15:[function(t,e){"use strict";function i(t,e){a.extend(e,u);var i=e.ids;return e.query?o(c,["type=page","fields=name,link,likes,category","limit="+e.limit,"q="+encodeURIComponent(e.query)]).then(function(r){return r.data.forEach(function(t){t.likes<e.minLikes||(h[t.name]=t.link,i.push(t.id))}),n(t,i,e)}):r.when(n(t,i,e))}function n(t,e,i){var n=[];return e.forEach(function(e){var r=document.createElement("div");r.className="fb-like-box",r.setAttribute("data-href","http://www.facebook.com/"+e),r.setAttribute("data-width",i.width),r.setAttribute("data-height",i.height),r.setAttribute("data-show-faces",i.showFaces),r.setAttribute("data-stream",i.showStream),r.setAttribute("data-header",i.showHeader);var o=a.attachIframeToCollage(t,r,i.width,i.height);FB.XFBML.parse(o),n.push(new s(o))}),n}var r=t("../../bower_components/q/q.js"),o=t("./getFromCommonApi.js"),s=t("../element/Iframe.js"),a=t("../utils.js"),c="https://graph.facebook.com/search";window.credits=window.credits||{};var h=window.credits.facebook={};e.exports=function(t,e){switch(e.type||(e.type="pages"),e.type){case"pages":return i(t,e)}};var u={limit:3,width:400,height:600,minLikes:0,showFaces:!0,showStream:!0,showHeader:!1,ids:[]}},{"../../bower_components/q/q.js":6,"../element/Iframe.js":11,"../utils.js":27,"./getFromCommonApi.js":17}],16:[function(t,e){"use strict";function i(t,e){var i,l=r.defer();return"string"==typeof e&&(e={tags:e}),s.extend(e,u),i=["format=json","method=flickr.photos.search","extras=url_z,url_m,path_alias","api_key="+e.apiKey,"license="+e.license,"sort="+e.sort,"tag_mode="+e.tagMode,"per_page="+e.count,"content_type="+e.contentType,"media="+e.media,"tags="+e.tags,"api_key=50af342c4178f4a984377a4b4b55998b"],e.isCommons&&i.push("is_commons="+e.isCommons),a(h,"jsoncallback",i).then(function(t){var e=[],i=t.photos&&t.photos.photo||[],r=i.length;i.forEach(function(t){var i=t.url_z||t.url_m;return i?void n(t.url_z||t.url_m).then(function(i){var n=document.createElement("a");n.href="http://www.flickr.com/photos/"+t.pathalias+"/"+t.id+"/",n.width=i.width,n.height=i.height,n.target="_blank",n.style.display="block",n.appendChild(i),c[t.pathalias]=n.href,e.push(o.create(n)),0===--r&&l.resolve(e)},function(){0===--r&&l.resolve(e)}):void r--})}),l.promise}function n(t){var e=r.defer(),i=new Image;return i.src=t,i.onload=function(){l.appendChild(i),e.resolve(i)},i.onerror=e.reject.bind(e),e.promise}var r=t("../../bower_components/q/q.js"),o=t("../element/Simple.js"),s=t("../utils.js"),a=t("./getFromCommonApi.js");window.credits=window.credits||{};var c=window.credits.flickr={},h="https://api.flickr.com/services/rest/";e.exports=i;var u={sort:"relevance",count:"20",license:"1,2,3,4,5,6,7,8",apiKey:"06960d3c3c8affd01e65ec032513557b",media:"photos",tagMode:"all",isCommons:!1,contentType:"1"},l=document.createDocumentFragment()},{"../../bower_components/q/q.js":6,"../element/Simple.js":12,"../utils.js":27,"./getFromCommonApi.js":17}],17:[function(t,e){"use strict";var i=t("../../bower_components/q/q.js");window.API_CALLBACKS={},e.exports=function(){var t=0,e=window.API_CALLBACKS,n=1e4;return function(r,o,s,a){var c,h="c"+t++,u=i.defer(),l=document.createElement("script");return"string"!=typeof o&&(a=s,s=o,o="callback"),a=a||n,s=s||[],s.push(o+"=API_CALLBACKS."+h),c=setTimeout(function(){u.reject("timeout")},a),e[h]=function(t){clearTimeout(c),delete e[h],u.resolve(t)},l.async=!0,l.src=r+"?"+s.join("&"),document.body.appendChild(l),u.promise}}()},{"../../bower_components/q/q.js":6}],18:[function(t,e){"use strict";var i=t("../../bower_components/mustache/mustache.js"),n=t("./getFromCommonApi.js"),r=t("../element/Simple.js");window.credits=window.credits||{};var o=window.credits.googleNews={};e.exports=function(t,e){return c(e)};var s='<div class="article-wrapper">{{#image}}<a href="{{image.contextUrl}}"><img title="Image by {{image.publisher}}" class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/></a>{{/image}}<a class="article-title" href="{{sourceUrl}}">{{{title}}}</a><p class="article-attribution"><span class="article-publisher">{{{publisher}}}</span> &ndash; <span class="article-date">{{date}}</span> via {{#gnewsUrl}}<a class="article-via" href="{{gnewsUrl}}">{{/gnewsUrl}}Google News{{#gnewsUrl}}</a>{{/gnewsUrl}}</p><p class="article-body">{{{body}}}</p></div>',a=document.createDocumentFragment(),c=function(){var t="https://ajax.googleapis.com/ajax/services/search/news";return function(e){var c=["v=1.0","rsz=8","q="+encodeURIComponent(e)];return n(t,c).then(function(t){var e=[];return t.responseData.results.forEach(function(t){o[t.publisher]=t.unescapedUrl;var n={title:t.titleNoFormatting,sourceUrl:t.unescapedUrl,publisher:t.publisher,date:new Date(t.publishedDate).toLocaleDateString(),gnewsUrl:t.clusterUrl,body:t.content};t.image&&(n.image={src:t.image.tbUrl,width:t.image.tbWidth,height:t.image.tbHeight,publisher:t.image.publisher,contextUrl:t.image.originalContextUrl});var c=document.createElement("div");c.className="gnews-article",c.innerHTML=i.render(s,n),document.body.appendChild(c),c.width=c.clientWidth,c.height=c.clientHeight,e.push(new r(c)),a.appendChild(c)}),e})}}()},{"../../bower_components/mustache/mustache.js":5,"../element/Simple.js":12,"./getFromCommonApi.js":17}],19:[function(t,e){"use strict";var i=t("../../bower_components/mustache/mustache.js"),n=t("./getFromCommonApi.js"),r=t("../element/Simple.js");e.exports=function(t,e){return a(e)};var o='<div class="article-wrapper"><div class="post-attribution"><a href="{{authorUrl}}">{{#authorImage}}<img class="author-image" src="{{authorImage.src}}" width="{{authorImage.width}}" height="{{authorImage.height}}"/>{{/authorImage}}<span class="author-name">{{authorName}}</span></a><span class="post-date">on Google Plus &ndash; {{date}}</span></div><p class="author-comments">{{{authorComments}}}</p><div class="article"><a href="{{articleUrl}}">{{#image}}<img class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/>{{/image}}<div class="article-attribution"><span>{{title}}</span></div></a><p class="article-body">{{body}}</p></div></div>',s=document.createDocumentFragment(),a=function(){var t="https://www.googleapis.com/plus/v1/activities";return function(e){var a=["key=AIzaSyAZw0kviWeCOidthcZAYs5oCZ0k8DsOuUk","query="+encodeURIComponent(e)];return n(t,a).then(function(t){var e=[];return t.items.forEach(function(t){if(t&&t.object&&t.object.attachments&&t.object.attachments.length>0){var n=t.object.attachments[0];if("article"===n.objectType){var a=t.object.actor||t.actor,c=t.object.content;c&&c.length>150&&(c=c.substr(0,150)+"&hellip;");var h={authorName:a.displayName,authorUrl:a.url,authorId:a.id,date:new Date(t.published).toLocaleDateString(),authorComments:c,articleUrl:n.url,title:n.displayName,body:n.content};a.image&&(h.authorImage={src:a.image.url,width:50,height:50}),n.image&&(h.image={src:n.image.url,width:n.image.width,height:n.image.height});var u=document.createElement("div");u.className="gplus-article",u.innerHTML=i.render(o,h),document.body.appendChild(u),u.width=u.clientWidth,u.height=u.clientHeight,e.push(new r(u)),s.appendChild(u)}}}),e})}}()},{"../../bower_components/mustache/mustache.js":5,"../element/Simple.js":12,"./getFromCommonApi.js":17}],20:[function(t,e){"use strict";var i=t("../../bower_components/q/q.js"),n=t("../element/Iframe.js"),r=t("../utils.js");e.exports=function(t,e){var o=e.width||500,s=e.height||500,a=document.createElement("iframe");a.src=e.url;var c=r.attachIframeToCollage(t,a,o,s);return i.when(new n(c))}},{"../../bower_components/q/q.js":6,"../element/Iframe.js":11,"../utils.js":27}],21:[function(t,e){"use strict";var i=t("../../bower_components/q/q.js"),n=t("../element/Simple.js"),r=document.createDocumentFragment();e.exports=function(t,e){var o=i.defer(),s=new Image;return s.src=e,s.onload=function(){r.appendChild(s),o.resolve(new n(s))},s.onerror=o.reject.bind(o),o.promise}},{"../../bower_components/q/q.js":6,"../element/Simple.js":12}],22:[function(t,e,i){"use strict";i.flickr=t("./flickr.js"),i.image=t("./image.js"),i.youtube=t("./youtube.js"),i.googlePlus=t("./googlePlus.js"),i.googleNews=t("./googleNews.js"),i.nyTimes=t("./nyTimes.js"),i.twitter=t("./twitter.js"),i.facebook=t("./facebook.js"),i.iframe=t("./iframe.js"),i.reddit=t("./reddit.js")},{"./facebook.js":15,"./flickr.js":16,"./googleNews.js":18,"./googlePlus.js":19,"./iframe.js":20,"./image.js":21,"./nyTimes.js":23,"./reddit.js":24,"./twitter.js":25,"./youtube.js":26}],23:[function(t,e){"use strict";function i(t){function e(t){return t.results.map(function(t){var e=document.createElement("div");e.className="nytimes-article",t.byline&&(a[t.byline.replace("By ","")]=t.url);var i={title:t.title,byline:t.byline,date:new Date(t.publication_year,t.publication_month,t.publication_day).toLocaleDateString(),body:t.body,url:t.url};return t.small_image_url&&(i.image={src:t.small_image_url.replace(/thumbStandard.*\./,"hpMedium."),height:253,width:337}),e.innerHTML=s.render(c,i),document.body.appendChild(e),e.width=e.clientWidth,e.height=e.clientHeight,h.appendChild(e),new o(e)})}return t.data?r.when(e(t.data)):n(t).then(function(t){return e(t)})}function n(t){var e=r.defer(),i=["format=json","fields=publication_year,publication_month,publication_day,body,date,title,url,byline,small_image_url,small_image_height,small_image_width","api-key=af04c123c8988a12245668f5b5fa4f4c:8:67325739","query="+t.query],n=new XMLHttpRequest;return n.onload=function(){e.resolve(JSON.parse(this.responseText))},n.onerror=function(){e.reject()},n.open("get",u+"?"+i.join("&"),!0),n.send(),e.promise}var r=t("../../bower_components/q/q.js"),o=t("../element/Simple.js"),s=t("../../bower_components/mustache/mustache.js");window.credits=window.credits||{};var a=window.credits.nyTimes={},c='<h2><a href="{{url}}">{{{title}}}</a></h2>{{#image}}<img class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/>{{/image}}<div class="article-attribution"><img class="nyt-brand" src="http://graphics8.nytimes.com/packages/images/developer/logos/poweredby_nytimes_30a.png"/><span class="byline">{{{byline}}}</span><span class="date">{{date}}</span></div><p>{{{body}}}</p>',h=document.createDocumentFragment(),u="/svc/search/v1/article";e.exports=function(t,e){return i(e)}},{"../../bower_components/mustache/mustache.js":5,"../../bower_components/q/q.js":6,"../element/Simple.js":12}],24:[function(t,e){"use strict";function i(t,e){c.extend(e,p);var i,n,r=["limit="+e.limit,"restrict_sr="+e.restrict_sr,"sort="+e.sort,"t="+e.time,"q="+e.query],s=document.createElement("IFRAME"),h=c.attachIframeToCollage(t,s,e.width,e.height);return i=s.contentDocument?s.contentDocument:s.contentWindow.document,n="<html><head><title></title></head><body>",n+='<script type="text/javascript" src="http://www.reddit.com/r/'+e.subreddit+"/search.embed?"+r.join("&").replace(" ","%20")+'"></script>',n+="</body></html>",i.open(),i.write(n),i.close(),o.when(new a(h))}function n(t,e){var i,n=o.defer();return"string"==typeof e&&(e={tags:e}),c.extend(e,p),i=["limit="+e.limit,"restrict_sr="+e.restrict_sr,"sort="+e.sort,"t="+e.time,"q="+e.query],h(l,"jsonp",i).then(function(t){var i,o=[],a=t.data&&t.data.children||[];a=a.filter(function(t){return t=t.data,t.score<e.minScore||t.num_comments<e.minComments||!~t.url.indexOf(".jpg")?!1:!0}),i=a.length,a.forEach(function(t){t=t.data,u[t.author]="http://www.reddit.com"+t.permalink,r(t.url).then(function(e){var r=document.createElement("a");r.href="http://www.reddit.com"+t.permalink,r.width=e.width,r.height=e.height,r.target="_blank",r.style.display="block",r.appendChild(e),o.push(s.create(r)),0===--i&&n.resolve(o)},function(){0===--i&&n.resolve(o)})})}),n.promise}function r(t){var e=o.defer(),i=new Image;return i.src=t,i.onload=function(){d.appendChild(i),e.resolve(i)},i.onerror=e.reject.bind(e),e.promise}var o=t("../../bower_components/q/q.js"),s=t("../element/Simple.js"),a=t("../element/Iframe.js"),c=t("../utils.js"),h=t("./getFromCommonApi.js");window.credits=window.credits||{};var u=window.credits.reddit={},l="http://www.reddit.com/r/all/search.json";e.exports=function(t,e){return"embed"===e.type?i(t,e):n(t,e)};var p={limit:"20",subreddit:"all",restrict_sr:"false",sort:"top",time:"all",nsfw:"false",minComments:0,width:500,height:600,minScore:0},d=document.createDocumentFragment()},{"../../bower_components/q/q.js":6,"../element/Iframe.js":11,"../element/Simple.js":12,"../utils.js":27,"./getFromCommonApi.js":17}],25:[function(t,e){"use strict";var i=t("../../bower_components/q/q.js"),n=t("./getFromCommonApi.js"),r=t("../element/Iframe.js"),o=1e4;window.credits=window.credits||{};var s=window.credits.twitter={};e.exports=function(t,e){var i=t.element;return e.query?c(e.query).then(function(e){return a(e,i,t)}):e.ids?a(e.ids,i,t):e.id?a([e.id],i,t).then(function(t){return t&&t.length?t[0]:void 0}):void 0};var a=function(){return function(t,e){function n(){for(var e,i=l.length;i--;)e=l[i],"0"!==e.height&&"0"!==e.width&&(h.push(r.create(e)),h.length===t.length&&(clearTimeout(p),clearInterval(d),c.resolve(h)),l.splice(i,1))}function s(t){if(!u){var e="contentWindow"in t?t.contentWindow:t.contentDocument.defaultView,i=e.onmousemove;e.onmousemove=function(e){i&&i(e);var n=document.createEvent("MouseEvents"),r=t.getBoundingClientRect();n.initMouseEvent("mousemove",!0,!1,window,e.detail,e.screenX,e.screenY,e.clientX+r.left,e.clientY+r.top,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),t.dispatchEvent(n)},l.push(t),t.style.opacity=0}}if(Array.isArray(t)&&e){for(var a=t.length,c=i.defer(),h=[],u=!1,l=[],p=setTimeout(function(){u=!0,clearInterval(d),c.resolve(h)},o),d=setInterval(n,250);a--;)twttr.widgets.createTweet(t[a],e,s);return c.promise}}}(),c=function(){var t="http://search.twitter.com/search.json";return function(e){return n(t,["format=json","q="+encodeURIComponent(e)]).then(function(t){var i=[],n=[];return t.results.forEach(function(t){~n.indexOf(t.text)||(n.push(t.text),~t.from_user.toLowerCase().indexOf(e.toLowerCase())||(s[t.from_user]="http://twitter.com/"+t.from_user,i.push(t.id_str)))}),i})}}()},{"../../bower_components/q/q.js":6,"../element/Iframe.js":11,"./getFromCommonApi.js":17}],26:[function(t,e){"use strict";var i=t("../../bower_components/q/q.js"),n=t("../element/Video.js"),r=t("./getFromCommonApi.js"),o=t("../utils.js"),s=1e4;window.credits=window.credits||{};var a=window.credits.youtube={};e.exports=function(t,e){return e.query?h(e).then(function(i){return e.videoIds=i,u(t,e)}):e.videoId?(e.videoIds=[e.videoId],u(t,e).then(function(t){return t[0]})):e.videoIds?u(t,e):void 0};var c={duration:"short",key:"AIzaSyAZw0kviWeCOidthcZAYs5oCZ0k8DsOuUk"},h=function(){var t="https://www.googleapis.com/youtube/v3/search";return function(e){o.extend(e,c);var i=["part=id,snippet","videoDuration="+e.duration,"type=video","videoEmbeddable=true","videoSyndicated=true","key="+e.key,"q="+encodeURIComponent(e.query)];return r(t,i).then(function(t){var e=[];return t.items.forEach(function(t){a[t.snippet.channelTitle]="http://youtube.com/"+t.snippet.channelTitle,e.push(t.id.videoId)}),e})}}(),u=function(){return function(t,e){if(Array.isArray(e.videoIds)){var n,r=e.videoIds.length,o=i.defer(),a=[],c=!1,h=setTimeout(function(){c=!0,o.resolve(a)},s);for(e.callback=function(t){!c&&t&&(a.push(t),a.length===e.videoIds.length&&(clearTimeout(h),o.resolve(a)))};r--;)n=Object.create(e),n.videoId=e.videoIds[r],p(t,n);return o.promise}}}(),l=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,p=function(){var t=0;return function(e,i){var r=i.videoId,o=i.width||1060,s=i.height||650,a="player"+t++,c=document.createElement("div");c.width=o,c.height=s,c.className="youtube-video",l&&(c.className+=" hide-video-mask"),c.innerHTML='<div id="'+a+'"></div><div class="video-mask"></div>',e.element.appendChild(c);var h;new YT.Player(a,{height:s,width:o,playerVars:{controls:0,html5:1,start:i.startTime||0},videoId:r,events:{onReady:function(t){var e=t.target;h=n.create(c,e,{continuousPlay:i.continuousPlay,autoplay:i.autoplay,loop:i.loop}),l&&(h.on("playing",function(){c.className=c.className.replace(" hide-video-mask","")}),h.on("paused",function(){c.className+=" hide-video-mask"})),e.pauseVideo(),i.continuousPlay&&(e.unMute(),e.setVolume(100)),i.mute&&(e.mute(),e.setVolume(0)),i.callback&&i.callback(h)},onError:function(){}}})}}()},{"../../bower_components/q/q.js":6,"../element/Video.js":13,"../utils.js":27,"./getFromCommonApi.js":17}],27:[function(t,e,i){"use strict";i.extend=function(t){for(var e,i,n=arguments.length,r=1;n>r;r++){e=arguments[r];for(i in e)!e.hasOwnProperty(i)||i in t||(t[i]=e[i])}},i.attachIframeToCollage=function(t,e,i,n){var r=document.createElement("div");r.className="iframe-container";var o=document.createElement("div");o.className="iframe-overflow-wrapper",o.style.width=i+"px",o.style.height=n+"px",r.appendChild(o),e.style.width=i+"px",e.style.height=n+"px",o.appendChild(e);var s=document.createElement("div");s.className="iframe-mask",r.appendChild(s);var a=!1;return s.addEventListener("click",function(){a=!0,r.className+=" in-focus",t.pause(.4)}),s.addEventListener("mouseover",function(){a&&(a=!1,r.className=r.className.replace(" in-focus",""),t.resume(.4))}),t.element.appendChild(r),r},i.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,15)},i.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)},i.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||function(){};var n=document.body.style;i.transitionAttribute=void 0!==n.msTransition&&"msTransition"||void 0!==n.webkitTransition&&"webkitTransition"||void 0!==n.MozTransition&&"MozTransition"||void 0!==n.transition&&"transition"},{}]},{},[9])(9)});
//# sourceMappingURL=collage.min.js.map